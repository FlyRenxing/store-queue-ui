(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0529d11c"],{"9d01":function(e,t,a){},b73d:function(e,t,a){"use strict";var i=a("5530"),s=(a("0481"),a("ec29"),a("9d01"),a("fe09")),n=a("c37a"),d=a("c3f0"),o=a("0789"),l=a("490a"),r=a("80d2");t["a"]=s["a"].extend({name:"v-switch",directives:{Touch:d["a"]},props:{inset:Boolean,loading:{type:[Boolean,String],default:!1},flat:{type:Boolean,default:!1}},computed:{classes:function(){return Object(i["a"])(Object(i["a"])({},n["a"].options.computed.classes.call(this)),{},{"v-input--selection-controls v-input--switch":!0,"v-input--switch--flat":this.flat,"v-input--switch--inset":this.inset})},attrs:function(){return{"aria-checked":String(this.isActive),"aria-disabled":String(this.isDisabled),role:"switch"}},validationState:function(){return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0},switchData:function(){return this.setTextColor(this.loading?void 0:this.validationState,{class:this.themeClasses})}},methods:{genDefaultSlot:function(){return[this.genSwitch(),this.genLabel()]},genSwitch:function(){return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",Object(i["a"])(Object(i["a"])({},this.attrs),this.attrs$)),this.genRipple(this.setTextColor(this.validationState,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",Object(i["a"])({staticClass:"v-input--switch__track"},this.switchData)),this.$createElement("div",Object(i["a"])({staticClass:"v-input--switch__thumb"},this.switchData),[this.genProgress()])])},genProgress:function(){return this.$createElement(o["c"],{},[!1===this.loading?null:this.$slots.progress||this.$createElement(l["a"],{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft:function(){this.isActive&&this.onChange()},onSwipeRight:function(){this.isActive||this.onChange()},onKeydown:function(e){(e.keyCode===r["x"].left&&this.isActive||e.keyCode===r["x"].right&&!this.isActive)&&this.onChange()}}})},de51:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("h1",[e._v("用户管理")]),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.users,search:e.search,"sort-by":"uid","sort-desc":!0},scopedSlots:e._u([{key:"item.type",fn:function(t){var i=t.item;return[a("v-switch",{attrs:{"true-value":1,"false-value":0,readonly:""},on:{click:function(t){return e.editItem(i)}},model:{value:i.type,callback:function(t){e.$set(i,"type",t)},expression:"item.type"}})]}},{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[e._v("用户列表")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"搜索","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-dialog",{attrs:{scrollable:"","max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,s=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",s,!1),i),[e._v(" 添加用户 ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))]),a("v-spacer"),e._v(" 是否为管理员： "),a("v-switch",{attrs:{"true-value":1,"false-value":0},model:{value:e.editedItem.type,callback:function(t){e.$set(e.editedItem,"type",t)},expression:"editedItem.type"}})],1),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-text-field",{attrs:{label:"用户名"},model:{value:e.editedItem.uname,callback:function(t){e.$set(e.editedItem,"uname",t)},expression:"editedItem.uname"}})],1),a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-text-field",{attrs:{label:"密码（空留则不修改密码）"},model:{value:e.editedItem.new_password,callback:function(t){e.$set(e.editedItem,"new_password",t)},expression:"editedItem.new_password"}})],1),a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-text-field",{attrs:{label:"手机"},model:{value:e.editedItem.phone,callback:function(t){e.$set(e.editedItem,"phone",t)},expression:"editedItem.phone"}})],1),a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-text-field",{attrs:{label:"E-mail"},model:{value:e.editedItem.email,callback:function(t){e.$set(e.editedItem,"email",t)},expression:"editedItem.email"}})],1),a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-dialog",{ref:"dialog",attrs:{"return-value":e.editedItem.birthday,width:"290px"},on:{"update:returnValue":function(t){return e.$set(e.editedItem,"birthday",t)},"update:return-value":function(t){return e.$set(e.editedItem,"birthday",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,s=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"生日",readonly:""},model:{value:e.editedItem.birthday,callback:function(t){e.$set(e.editedItem,"birthday",t)},expression:"editedItem.birthday"}},"v-text-field",s,!1),i))]}}]),model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[a("v-date-picker",{attrs:{scrollable:"",locale:"zh-cn"},model:{value:e.editedItem.birthday,callback:function(t){e.$set(e.editedItem,"birthday",t)},expression:"editedItem.birthday"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.modal=!1}}},[e._v(" 取消 ")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.dialog.save(e.editedItem.birthday)}}},[e._v(" 确定 ")])],1)],1)],1),a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-text-field",{attrs:{label:"用户头像(URL)"},model:{value:e.editedItem.logo,callback:function(t){e.$set(e.editedItem,"logo",t)},expression:"editedItem.logo"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v(" 取消 ")]),a("v-btn",{attrs:{color:"blue darken-1",loading:e.loading,text:""},on:{click:e.save}},[e._v(" 确定 ")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("确定删除该用户？")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v("取消")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("确定删除")]),a("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(t){var i=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(i)}}},[e._v(" mdi-pencil ")]),a("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(i)}}},[e._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:e.getUsersByAll}},[e._v(" 当前无用户-点此刷新 ")])]},proxy:!0}],null,!0)}),a("v-snackbar",{model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.message)+" ")])],1)},s=[],n={name:"Admin-User",components:{},data:function(){return{message:"",snackbar:!1,loading:!1,modal:!1,search:"",dialog:!1,addressDialog:!1,dialogDelete:!1,headers:[{text:"用户ID",align:"start",sortable:!0,value:"uid"},{text:"用户名",value:"uname"},{text:"手机",value:"phone"},{text:"邮箱",value:"email"},{text:"生日",value:"birthday"},{text:"是否管理员",value:"type",sortable:!1},{text:"操作",value:"actions",sortable:!1}],users:[],editedIndex:-1,editedItem:{birthday:"2002-06-02",email:"",logo:"",password:"",phone:"",regtime:"",type:0,uname:"",uid:0,new_password:""},defaultItem:{birthday:"2002-06-02",email:"",logo:"",password:"",phone:"",regtime:"",type:0,uname:"",uid:0}}},computed:{formTitle:function(){return-1===this.editedIndex?"添加用户":"编辑用户(uid:"+this.editedItem.uid+")"}},watch:{dialog:function(e){e||this.close()},dialogDelete:function(e){e||this.closeDelete()}},created:function(){this.getUsersByAll()},methods:{getUsersByAll:function(){var e=this;this.$axios.get("/user/all").then((function(t){var a=e;if(200==t.data.code){a.loading=!1;var i=t.data.data;a.users=i}})).catch((function(e){console.log(e)}))},newUser:function(){var e=this;this.loading=!0;var t=new FormData;t.append("uname",this.editedItem.uname),t.append("password",this.$md5(this.editedItem.password)),t.append("phone",this.editedItem.phone),t.append("email",this.editedItem.email),t.append("birthday",this.editedItem.birthday),t.append("type",this.editedItem.type),t.append("logo",this.editedItem.logo),this.$axios.post("/user/new",t).then((function(t){var a=e;a.loading=!1,200==t.data.code?(a.message=t.data.meg,a.snackbar=!0,a.getUsersByAll(),a.close()):(a.snackbar=!0,a.message=t.data.meg+"，代码："+t.data.code)})).catch((function(t){e.loading=!1,e.snackbar=!0,e.message="修改失败，网络异常请稍后重试。代码："+t}))},editUser:function(){var e=this;this.loading=!0;var t=new FormData;t.append("uid",this.editedItem.uid),t.append("uname",this.editedItem.uname),t.append("password",void 0==this.editedItem.new_password?this.editedItem.password:this.$md5(this.editedItem.new_password)),t.append("phone",this.editedItem.phone),t.append("email",this.editedItem.email),t.append("birthday",this.editedItem.birthday),t.append("type",this.editedItem.type),t.append("logo",this.editedItem.logo),this.$axios.post("/user/edit",t).then((function(t){var a=e;a.loading=!1,200==t.data.code?(a.message=t.data.meg,a.snackbar=!0,a.getUsersByAll(),a.close()):(a.snackbar=!0,a.message=t.data.meg+"，代码："+t.data.code)})).catch((function(t){e.loading=!1,e.snackbar=!0,e.message="修改失败，网络异常请稍后重试。代码："+t}))},deleteUser:function(e){var t=this;this.loading=!0,this.$axios.get("/user/delete?uid="+e).then((function(e){var a=t;a.loading=!1,200==e.data.code?(a.message=e.data.meg,a.snackbar=!0,a.getUsersByAll(),a.closeDelete()):(a.snackbar=!0,a.message=e.data.meg+"，代码："+e.data.code)})).catch((function(e){t.loading=!1,t.snackbar=!0,t.message="删除失败，网络异常请稍后重试。代码："+e}))},initialize:function(){this.users=[]},editItem:function(e){this.editedIndex=this.users.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){this.editedIndex=this.users.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},deleteItemConfirm:function(){this.deleteUser(this.editedItem.uid)},close:function(){var e=this;this.dialog=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},closeDelete:function(){var e=this;this.dialogDelete=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},save:function(){-1==this.editedIndex?this.newUser():this.editUser()}}},d=n,o=a("2877"),l=a("6544"),r=a.n(l),c=a("8336"),u=a("b0af"),h=a("99d9"),m=a("62ad"),v=a("a523"),p=a("8fea"),f=a("2e4b"),g=a("169a"),b=a("ce7e"),I=a("132d"),x=a("0fd9"),k=a("2db4"),y=a("2fa4"),w=a("b73d"),_=a("8654"),$=a("71d9"),C=a("2a7f"),D=Object(o["a"])(d,i,s,!1,null,null,null);t["default"]=D.exports;r()(D,{VBtn:c["a"],VCard:u["a"],VCardActions:h["a"],VCardText:h["b"],VCardTitle:h["c"],VCol:m["a"],VContainer:v["a"],VDataTable:p["a"],VDatePicker:f["a"],VDialog:g["a"],VDivider:b["a"],VIcon:I["a"],VRow:x["a"],VSnackbar:k["a"],VSpacer:y["a"],VSwitch:w["a"],VTextField:_["a"],VToolbar:$["a"],VToolbarTitle:C["a"]})}}]);
//# sourceMappingURL=chunk-0529d11c.1747c682.js.map