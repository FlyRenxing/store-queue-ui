(function(e){function t(t){for(var o,s,i=t[0],l=t[1],c=t[2],d=0,u=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&u.push(r[s][0]),r[s]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);m&&m(t);while(u.length)u.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],o=!0,s=1;s<a.length;s++){var i=a[s];0!==r[i]&&(o=!1)}o&&(n.splice(t--,1),e=l(l.s=a[0]))}return e}var o={},s={app:0},r={app:0},n=[];function i(e){return l.p+"static/js/"+({about:"about"}[e]||e)+"."+{"chunk-2d0ae5d6":"1b838940","chunk-50d76e67":"4da70c18",about:"4a16ae15","chunk-051d2f6c":"747c163d","chunk-0529d11c":"ce71a0d1","chunk-1cd42ab1":"2268184c","chunk-2d228876":"ba5eefe3"}[e]+".js"}function l(t){if(o[t])return o[t].exports;var a=o[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.e=function(e){var t=[],a={"chunk-50d76e67":1,"chunk-051d2f6c":1,"chunk-0529d11c":1,"chunk-1cd42ab1":1};s[e]?t.push(s[e]):0!==s[e]&&a[e]&&t.push(s[e]=new Promise((function(t,a){for(var o="static/css/"+({about:"about"}[e]||e)+"."+{"chunk-2d0ae5d6":"31d6cfe0","chunk-50d76e67":"7df40c06",about:"31d6cfe0","chunk-051d2f6c":"33ac40b1","chunk-0529d11c":"33ac40b1","chunk-1cd42ab1":"176a842b","chunk-2d228876":"31d6cfe0"}[e]+".css",r=l.p+o,n=document.getElementsByTagName("link"),i=0;i<n.length;i++){var c=n[i],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===o||d===r))return t()}var u=document.getElementsByTagName("style");for(i=0;i<u.length;i++){c=u[i],d=c.getAttribute("data-href");if(d===o||d===r)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var o=t&&t.target&&t.target.src||r,n=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");n.code="CSS_CHUNK_LOAD_FAILED",n.request=o,delete s[e],m.parentNode.removeChild(m),a(n)},m.href=r;var v=document.getElementsByTagName("head")[0];v.appendChild(m)})).then((function(){s[e]=0})));var o=r[e];if(0!==o)if(o)t.push(o[2]);else{var n=new Promise((function(t,a){o=r[e]=[t,a]}));t.push(o[2]=n);var c,d=document.createElement("script");d.charset="utf-8",d.timeout=120,l.nc&&d.setAttribute("nonce",l.nc),d.src=i(e);var u=new Error;c=function(t){d.onerror=d.onload=null,clearTimeout(m);var a=r[e];if(0!==a){if(a){var o=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+o+": "+s+")",u.name="ChunkLoadError",u.type=o,u.request=s,a[1](u)}r[e]=void 0}};var m=setTimeout((function(){c({type:"timeout",target:d})}),12e4);d.onerror=d.onload=c,document.head.appendChild(d)}return Promise.all(t)},l.m=e,l.c=o,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)l.d(a,o,function(t){return e[t]}.bind(null,o));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var m=d;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{staticStyle:{overflow:"hidden"}},[e.$store.state.sys.isMobile?e._e():a("v-navigation-drawer",{attrs:{app:"",permanent:"","expand-on-hover":e.$store.state.sys.menubutton}},[a("v-list",[a("v-list-item",{staticClass:"px-2"},[a("v-list-item-avatar",[null!=e.$store.state.user.logo?a("v-img",{attrs:{src:e.$store.state.user.logo}}):e._e(),null==e.$store.state.user.logo?a("v-avatar",{attrs:{color:e.$store.state.sys.color}},[null==e.$store.state.user.logo?a("span",{staticClass:"white--text headline"},[e._v(e._s(e.$store.state.user.uname.slice(0,2)))]):e._e()]):e._e()],1)],1),a("v-list-item",{attrs:{link:"",to:"/my"}},[a("v-list-item-content",[a("v-list-item-title",{staticClass:"title"},[e._v(" "+e._s(e.$store.state.user.uname)+" ")]),a("v-list-item-subtitle",[e._v(e._s(e.$store.state.user.email))])],1)],1)],1),a("v-divider"),a("v-list",{attrs:{nav:"",dense:""}},[a("v-list-item-group",{model:{value:e.$store.state.sys.navs.value,callback:function(t){e.$set(e.$store.state.sys.navs,"value",t)},expression:"$store.state.sys.navs.value"}},e._l(e.$store.state.sys.navs.navs,(function(t){return a("v-list-item",{key:t.name,attrs:{link:"",color:e.color,to:t.url}},[a("v-list-item-icon",[a("v-icon",[e._v(e._s(t.icon))])],1),a("v-list-item-title",[e._v(e._s(t.name))])],1)})),1),1==e.$store.state.user.type?a("v-list-item-group",[a("p"),a("v-divider",{attrs:{inset:""}}),e._l(e.$store.state.sys.navs.navs_admin,(function(t){return a("v-list-item",{key:t.name,attrs:{link:"",color:e.color,to:t.url}},[a("v-list-item-icon",[a("v-icon",[e._v(e._s(t.icon))])],1),a("v-list-item-title",[e._v(e._s(t.name))])],1)}))],2):e._e()],1)],1),a("v-app-bar",{attrs:{app:"",color:e.color,dense:"",dark:"","hide-on-scroll":"/all"==this.$route.path},scopedSlots:e._u(["/all"==this.$route.path?{key:"extension",fn:function(){return[a("v-tabs",{attrs:{"align-with-title":"","center-active":""},model:{value:e.$store.state.goods.tab,callback:function(t){e.$set(e.$store.state.goods,"tab",t)},expression:"$store.state.goods.tab"}},[a("v-tabs-slider",{attrs:{color:"yellow"}}),e._l(e.$store.state.goods.category,(function(t){return a("v-tab",{key:t.id,attrs:{exact:"",to:{path:"all",query:{category:t.id}}}},[e._v(" "+e._s(t.name)+" ")])}))],2)]},proxy:!0}:null],null,!0)},[e.$store.state.sys.isMobile?e._e():a("v-app-bar-nav-icon",{on:{click:function(t){return e.menuSwitch()}}}),a("v-toolbar-title",[e._v(e._s(e.$store.state.sys.name))]),a("v-spacer"),a("v-btn",{attrs:{icon:""}},[a("v-icon",[e._v("mdi-heart")])],1),a("v-btn",{attrs:{icon:""}},[a("v-icon",[e._v("mdi-magnify")])],1),a("v-menu",{attrs:{left:"",bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,s=t.attrs;return[a("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",s,!1),o),[a("v-icon",[e._v("mdi-dots-vertical")])],1)]}}])},[a("v-list",e._l(e.$store.state.sys.barmenu,(function(t){return a("v-list-item",{key:t.name,on:{click:function(a){return e.dialog(t.url)}}},[a("v-list-item-title",[e._v(e._s(t.name))])],1)})),1)],1)],1),a("v-main",[a("v-container",{attrs:{fluid:""}},[a("router-view",{on:{login:function(t){return e.dialog("Login")}}})],1)],1),e.$store.state.sys.isMobile?a("v-footer",{attrs:{app:"",color:e.color}},[a("v-bottom-navigation",{attrs:{"background-color":e.color,dark:"",shift:""},model:{value:e.$store.state.sys.navs.value,callback:function(t){e.$set(e.$store.state.sys.navs,"value",t)},expression:"$store.state.sys.navs.value"}},e._l(e.$store.state.sys.navs.navs,(function(t){return a("v-btn",{key:t.name,attrs:{to:t.url}},[a("span",[e._v(e._s(t.name))]),a("v-icon",[e._v(e._s(t.icon))])],1)})),1)],1):e._e(),a("Login",{attrs:{dialog:e.$store.state.sys.dialog.login}}),a("Register",{attrs:{dialog:e.$store.state.sys.dialog.register}}),a("Edit",{attrs:{dialog:e.$store.state.sys.dialog.useredit,user:e.$store.state.user}}),a("About",{attrs:{dialog:e.$store.state.sys.dialog.about}}),a("ViewG",{attrs:{dialog:e.$store.state.sys.dialog.viewgood}})],1)},r=[],n=(a("1276"),a("ac1f"),a("d3b7"),a("3ca3"),a("ddb0"),a("4ec9"),a("b64b"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{fullscreen:this.$store.state.sys.isMobile,"hide-overlay":"",persistent:"",transition:"dialog-bottom-transition",width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:this.$store.state.sys.color}},[a("v-toolbar-title",[e._v(e._s(e.currentTitle))]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},on:{click:e.isClose}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-window",{model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[a("v-window-item",{attrs:{value:1}},[a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{counter:10,rules:e.nameRules,"prepend-icon":"mdi-account-circle",label:"用户名",required:""},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}}),a("v-text-field",{attrs:{counter:18,rules:e.passwordRules,"prepend-icon":"mdi-key",label:"密码",required:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.validate(1)}},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}}),a("v-checkbox",{attrs:{rules:[function(e){return!!e||"你需要同意用户协议"}],label:"同意用户协议",required:""},model:{value:e.checkbox,callback:function(t){e.checkbox=t},expression:"checkbox"}}),a("v-btn",{staticClass:"mr-4",attrs:{disabled:!e.valid,color:"success",loading:e.loading},on:{click:function(t){return e.validate(1)}}},[e._v(" 登录 ")]),a("v-btn",{staticClass:"mr-4",attrs:{color:"error"},on:{click:e.reset}},[e._v(" 重置 ")]),a("v-btn",{attrs:{color:"warning"},on:{click:function(t){e.step++}}},[e._v(" 忘记密码 ")])],1)],1)],1),a("v-window-item",{attrs:{value:2}},[a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{counter:10,rules:e.nameRules,"prepend-icon":"mdi-account-circle",label:"用户名",required:""},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}}),a("v-text-field",{attrs:{counter:20,rules:e.emailRules,"prepend-icon":"mdi-email",label:"email",required:""},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}}),a("v-text-field",{attrs:{counter:14,rules:e.phoneRules,"prepend-icon":"mdi-cellphone",label:"手机",required:""},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}}),a("v-checkbox",{attrs:{rules:[function(e){return!!e||"这个账号不是你的为什么要改别人的密码嘞"}],label:"我确定这个账号是我的",required:""},model:{value:e.checkbox,callback:function(t){e.checkbox=t},expression:"checkbox"}}),a("v-text-field",{attrs:{counter:18,rules:e.passwordRules,"prepend-icon":"mdi-key",label:"新密码",required:""},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}}),a("v-btn",{staticClass:"mr-4",attrs:{disabled:!e.valid,color:"success",loading:e.loading},on:{click:function(t){return e.validate(2)}}},[e._v(" 重置密码 ")]),a("v-btn",{staticClass:"mr-4",attrs:{color:"error"},on:{click:e.reset}},[e._v(" 重新输入 ")]),a("v-btn",{attrs:{color:"warning"},on:{click:function(t){e.step--}}},[e._v(" 我没有忘记密码 ")])],1)],1)],1)],1)],1)],1),a("v-snackbar",{model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.message)+" ")])],1)}),i=[],l=(a("b0c0"),{name:"Login",props:["dialog"],data:function(){return{step:1,valid:!0,user:{name:"",password:"",phone:"",email:""},nameRules:[function(e){return!!e||"用户名不能为空"},function(e){return e&&e.length<=10||"用户名长度需要小于10"}],passwordRules:[function(e){return!!e||"密码不能为空"},function(e){return e&&e.length>=6||"密码长度需要大于等于6"}],phoneRules:[function(e){return!!e||"电话不能为空"},function(e){return e&&e.length<=14||"电话长度需要小于等于14"}],emailRules:[function(e){return!!e||"邮箱不能为空"},function(e){var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)||"这不是一个邮箱哦！"}],checkbox:!0,loading:!1,message:"",snackbar:!1}},computed:{currentTitle:function(){switch(this.step){case 1:return"登录";case 2:return"修改密码--输入正确信息即可修改密码";default:return"BUG..."}}},methods:{isClose:function(){this.$store.commit("dialog","Login")},validate:function(e){switch(this.$refs.form.validate(),e){case 1:this.login_submit();break;case 2:this.resetpassword_submit();break;default:break}},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},setCookie:function(e,t,a){a=a||0;var o="";if(0!=a){var s=new Date;s.setTime(s.getTime()+1e3*a),o="; expires="+s.toGMTString()}document.cookie=e+"="+escape(t)+o+";"},getCookie:function(e){for(var t=e+"=",a=decodeURIComponent(document.cookie),o=a.split(";"),s=0;s<o.length;s++){var r=o[s];while(" "==r.charAt(0))r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""},login_submit:function(){var e=this;this.loading=!0;var t=new FormData;t.append("uname",this.user.name),t.append("password",this.user.password),this.$axios.post("/user/login",t).then((function(t){var a=e;if(e.loading=!1,200==t.data.code){e.snackbar=!0;var o={birthday:t.data.data.birthday,email:t.data.data.email,logo:t.data.data.logo,password:t.data.data.password,phone:t.data.data.phone,regtime:t.data.data.regtime,uid:t.data.data.uid,uname:t.data.data.uname,type:t.data.data.type};a.$store.commit("updateUser",o),e.message="登陆成功！",a.$store.commit("islogin"),1==o.type&&a.addAdminRouter(),a.$store.commit("dialog","Login")}else 201==t.data.code?(e.snackbar=!0,e.message="账号或密码错误，代码："+t.data.code):(e.snackbar=!0,e.message="登陆失败，代码："+t.data.code)})).catch((function(t){e.loading=!1,e.snackbar=!0,e.message="登陆失败，请稍后重试。代码："+t}))},resetpassword_submit:function(){var e=this;this.loading=!0;var t=new FormData;t.append("uname",this.user.name),t.append("newpassword",this.user.password),t.append("email",this.user.email),t.append("phone",this.user.phone),this.$axios.post("/user/forgetpassword",t).then((function(t){var a=e;e.loading=!1,200==t.data.code?(e.snackbar=!0,e.message="密码修改成功！",a.step--):201==t.data.code?(e.snackbar=!0,e.message="查无此人，代码："+t.data.code):202==t.data.code?(e.snackbar=!0,e.message="密码不能与之前的密码相同，代码："+t.data.code):203==t.data.code?(e.snackbar=!0,e.message="用户信息验证失败，代码："+t.data.code):204==t.data.code?(e.snackbar=!0,e.message="系统异常，代码："+t.data.code):(e.snackbar=!0,e.message="未知异常，代码："+t.data.code)})).catch((function(t){e.loading=!1,e.snackbar=!0,e.message="修改失败，网络异常，请稍后重试。代码："+t}))},addAdminRouter:function(){this.$router.addRoute({path:"/admin/dashboard",name:"Dashboard",component:function(){return a.e("chunk-2d0ae5d6").then(a.bind(null,"0a6e"))}}),this.$router.addRoute({path:"/admin/order",name:"Order",component:function(){return Promise.all([a.e("chunk-50d76e67"),a.e("chunk-2d228876")]).then(a.bind(null,"da25"))}}),this.$router.addRoute({path:"/admin/activity",name:"Activity",component:function(){return Promise.all([a.e("chunk-50d76e67"),a.e("chunk-1cd42ab1")]).then(a.bind(null,"20f3"))}}),this.$router.addRoute({path:"/admin/user",name:"User",component:function(){return Promise.all([a.e("chunk-50d76e67"),a.e("chunk-0529d11c")]).then(a.bind(null,"de51"))}}),this.$router.addRoute({path:"/admin/goods",name:"Goods",component:function(){return Promise.all([a.e("chunk-50d76e67"),a.e("chunk-051d2f6c")]).then(a.bind(null,"f50f"))}})}}}),c=l,d=a("2877"),u=a("6544"),m=a.n(u),v=a("8336"),p=a("b0af"),h=a("99d9"),g=a("ac7c"),f=a("169a"),b=a("4bd4"),k=a("132d"),y=a("0fd9"),w=a("2db4"),_=a("2fa4"),x=a("8654"),$=a("71d9"),V=a("2a7f"),C=a("f665"),T=a("1e6c"),S=Object(d["a"])(c,n,i,!1,null,null,null),R=S.exports;m()(S,{VBtn:v["a"],VCard:p["a"],VCardText:h["b"],VCheckbox:g["a"],VDialog:f["a"],VForm:b["a"],VIcon:k["a"],VRow:y["a"],VSnackbar:w["a"],VSpacer:_["a"],VTextField:x["a"],VToolbar:$["a"],VToolbarTitle:V["a"],VWindow:C["a"],VWindowItem:T["a"]});var O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{fullscreen:this.$store.state.sys.isMobile,"hide-overlay":"",persistent:"",transition:"dialog-bottom-transition",width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:this.$store.state.sys.color}},[a("v-toolbar-title",[e._v("注册")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},on:{click:e.isClose}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{counter:10,rules:e.nameRules,"prepend-icon":"mdi-account-circle",label:"用户名",required:""},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}}),a("v-text-field",{attrs:{counter:18,rules:e.passwordRules,type:"password","prepend-icon":"mdi-key",label:"密码",required:""},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}}),a("v-text-field",{attrs:{counter:20,rules:e.emailRules,"prepend-icon":"mdi-email",label:"email",required:""},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}}),a("v-text-field",{attrs:{counter:14,rules:e.phoneRules,"prepend-icon":"mdi-cellphone",label:"手机",required:""},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}}),a("v-dialog",{ref:"dialog",attrs:{"return-value":e.user.birthday,width:"290px"},on:{"update:returnValue":function(t){return e.$set(e.user,"birthday",t)},"update:return-value":function(t){return e.$set(e.user,"birthday",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,s=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"生日","prepend-icon":"mdi-cake",readonly:""},model:{value:e.user.birthday,callback:function(t){e.$set(e.user,"birthday",t)},expression:"user.birthday"}},"v-text-field",s,!1),o))]}}]),model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[a("v-date-picker",{attrs:{scrollable:"",locale:"zh-cn"},model:{value:e.user.birthday,callback:function(t){e.$set(e.user,"birthday",t)},expression:"user.birthday"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.modal=!1}}},[e._v(" 取消 ")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.dialog.save(e.user.birthday)}}},[e._v(" 确定 ")])],1)],1),a("v-checkbox",{attrs:{rules:[function(e){return!!e||"你需要同意用户协议"}],label:"同意用户协议",required:""},model:{value:e.checkbox,callback:function(t){e.checkbox=t},expression:"checkbox"}}),a("v-btn",{staticClass:"mr-4",attrs:{disabled:!e.valid,color:"success",loading:e.loading},on:{click:e.validate}},[e._v(" 注册 ")]),a("v-btn",{staticClass:"mr-4",attrs:{color:"error"},on:{click:e.reset}},[e._v(" 重置 ")])],1)],1)],1)],1),a("v-snackbar",{model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.message)+" ")])],1)},A=[],L={name:"Register",props:["dialog"],data:function(){return{modal:!1,user:{name:"",password:"",email:"",phone:"",birthday:"2021-04-30"},valid:!0,nameRules:[function(e){return!!e||"用户名不能为空"},function(e){return e&&e.length<=10||"用户名长度需要小于10"}],passwordRules:[function(e){return!!e||"密码不能为空"},function(e){return e&&e.length>=6||"密码长度需要大于等于6"}],phoneRules:[function(e){return!!e||"电话不能为空"},function(e){return e&&e.length<=14||"电话长度需要小于等于14"}],emailRules:[function(e){return!!e||"邮箱不能为空"},function(e){var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)||"这不是一个邮箱哦！"}],checkbox:!0,loading:!1,message:"",snackbar:!1}},methods:{isClose:function(){this.$store.commit("dialog","Register")},validate:function(){this.$refs.form.validate(),this.submit()},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},setCookie:function(e,t,a){a=a||0;var o="";if(0!=a){var s=new Date;s.setTime(s.getTime()+1e3*a),o="; expires="+s.toGMTString()}document.cookie=e+"="+escape(t)+o+";"},getCookie:function(e){for(var t=e+"=",a=decodeURIComponent(document.cookie),o=a.split(";"),s=0;s<o.length;s++){var r=o[s];while(" "==r.charAt(0))r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""},submit:function(){var e=this;this.loading=!0;var t=new FormData;t.append("uname",this.user.name),t.append("password",this.user.password),t.append("email",this.user.email),t.append("phone",this.user.phone),t.append("birthday",this.user.birthday),console.log(t),this.$axios.post("/user/register",t).then((function(t){var a=e;a.loading=!1,200==t.data.code?(a.message=t.data.meg+",请登录",a.snackbar=!0,a.$store.commit("dialog","Register"),a.$store.commit("dialog","Login")):201==t.data.code?(a.snackbar=!0,a.message="账户名重复，请更改，代码："+t.data.code):(a.snackbar=!0,a.message="注册失败，代码："+t.data.code)})).catch((function(t){e.loading=!1,e.snackbar=!0,e.message="注册失败，网络异常请稍后重试。代码："+t}))}}},I=L,M=a("2e4b"),D=Object(d["a"])(I,O,A,!1,null,null,null),j=D.exports;m()(D,{VBtn:v["a"],VCard:p["a"],VCardText:h["b"],VCheckbox:g["a"],VDatePicker:M["a"],VDialog:f["a"],VForm:b["a"],VIcon:k["a"],VRow:y["a"],VSnackbar:w["a"],VSpacer:_["a"],VTextField:x["a"],VToolbar:$["a"],VToolbarTitle:V["a"]});var G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{fullscreen:this.$store.state.sys.isMobile,"hide-overlay":"",persistent:"",transition:"dialog-bottom-transition",width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:this.$store.state.sys.color}},[a("v-toolbar-title",[e._v(e._s(e.currentTitle))]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},on:{click:e.isClose}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-window",{model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[a("v-window-item",{attrs:{value:1}},[a("v-card-text",[a("v-form",{ref:"edit",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{counter:10,rules:e.nameRules,"prepend-icon":"mdi-account-circle",label:"用户名",required:"",disabled:""},model:{value:e.user.uname,callback:function(t){e.$set(e.user,"uname",t)},expression:"user.uname"}}),a("v-text-field",{attrs:{counter:20,rules:e.emailRules,"prepend-icon":"mdi-email",label:"email",required:""},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}}),a("v-text-field",{attrs:{counter:14,rules:e.phoneRules,"prepend-icon":"mdi-cellphone",label:"手机",required:""},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}}),a("v-dialog",{ref:"dialog",attrs:{"return-value":e.user.birthday,width:"290px"},on:{"update:returnValue":function(t){return e.$set(e.user,"birthday",t)},"update:return-value":function(t){return e.$set(e.user,"birthday",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,s=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"生日","prepend-icon":"mdi-cake",readonly:""},model:{value:e.user.birthday,callback:function(t){e.$set(e.user,"birthday",t)},expression:"user.birthday"}},"v-text-field",s,!1),o))]}}]),model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[a("v-date-picker",{attrs:{scrollable:"",locale:"zh-cn"},model:{value:e.user.birthday,callback:function(t){e.$set(e.user,"birthday",t)},expression:"user.birthday"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.modal=!1}}},[e._v(" 取消 ")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.dialog.save(e.user.birthday)}}},[e._v(" 确定 ")])],1)],1),a("v-card-actions",[a("v-btn",{staticClass:"mr-4",attrs:{disabled:!e.valid,color:"success",loading:e.loading},on:{click:function(t){return e.validate(1)}}},[e._v(" 修改 ")]),a("v-spacer"),a("v-btn",{staticClass:"mr-4",attrs:{color:"fail",loading:e.loading},on:{click:function(t){e.step++}}},[e._v(" 修改密码 ")])],1)],1)],1)],1),a("v-window-item",{attrs:{value:2}},[a("v-card-text",[a("v-form",{ref:"resetpassword"},[a("v-text-field",{attrs:{counter:18,rules:e.passwordRules,type:"password","prepend-icon":"mdi-key",label:"旧密码",required:""},model:{value:e.resetpassword.oldpassword,callback:function(t){e.$set(e.resetpassword,"oldpassword",t)},expression:"resetpassword.oldpassword"}}),a("v-text-field",{attrs:{counter:18,rules:e.newpasswordRules,type:"password","prepend-icon":"mdi-key",label:"新密码",required:""},model:{value:e.resetpassword.newpassword,callback:function(t){e.$set(e.resetpassword,"newpassword",t)},expression:"resetpassword.newpassword"}})],1),a("v-card-actions",[a("v-btn",{staticClass:"mr-4",attrs:{disabled:!e.valid,color:"success",loading:e.loading},on:{click:function(t){return e.validate(2)}}},[e._v(" 修改 ")]),a("v-spacer"),a("v-btn",{staticClass:"mr-4",attrs:{color:"fail"},on:{click:function(t){e.step--}}},[e._v(" 修改信息 ")])],1)],1)],1)],1)],1)],1),a("v-snackbar",{model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.message)+" ")])],1)},P=[],E={name:"Edit",props:["dialog","user"],computed:{currentTitle:function(){switch(this.step){case 1:return"修改资料";case 2:return"修改密码";default:return"BUG..."}}},data:function(){return{step:1,modal:!1,valid:!0,resetpassword:{oldpassword:"",newpassword:""},nameRules:[function(e){return!!e||"用户名不能为空"},function(e){return e&&e.length<=10||"用户名长度需要小于10"}],passwordRules:[function(e){return!!e||"密码不能为空"},function(e){return e&&e.length>=6||"密码长度需要大于等于6"}],newpasswordRules:[function(e){return!!e||"新密码不能为空"},function(e){return e&&e.length>=6||"密码长度需要大于等于6"}],phoneRules:[function(e){return!!e||"电话不能为空"},function(e){return e&&e.length<=14||"电话长度需要小于等于14"}],emailRules:[function(e){return!!e||"邮箱不能为空"},function(e){var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)||"这不是一个邮箱哦！"}],checkbox:!0,loading:!1,message:"",snackbar:!1}},mounted:function(){},methods:{isClose:function(){this.$store.commit("dialog","Useredit")},validate:function(e){switch(e){case 1:this.$refs.edit.validate(),this.edit_submit();break;case 2:this.$refs.resetpassword.validate(),this.resetpassword_submit();break;default:break}},reset:function(){this.$refs.edit.reset()},resetValidation:function(){this.$refs.edit.resetValidation(),this.$refs.resetpassword.resetValidation()},setCookie:function(e,t,a){a=a||0;var o="";if(0!=a){var s=new Date;s.setTime(s.getTime()+1e3*a),o="; expires="+s.toGMTString()}document.cookie=e+"="+escape(t)+o+";"},getCookie:function(e){for(var t=e+"=",a=decodeURIComponent(document.cookie),o=a.split(";"),s=0;s<o.length;s++){var r=o[s];while(" "==r.charAt(0))r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""},edit_submit:function(){var e=this;this.loading=!0;var t=new FormData;t.append("email",this.user.email),t.append("phone",this.user.phone),t.append("birthday",this.user.birthday),this.$axios.post("/user/modifyuserinfo",t).then((function(t){var a=e;a.loading=!1,200==t.data.code?(a.message=t.data.meg,a.snackbar=!0,a.relogin(),a.$store.commit("dialog","Useredit")):(a.snackbar=!0,a.message=t.data.meg+"，代码："+t.data.code)})).catch((function(t){e.loading=!1,e.snackbar=!0,e.message="注册失败，网络异常请稍后重试。代码："+t}))},resetpassword_submit:function(){var e=this;this.loading=!0;var t=new FormData;t.append("oldPassword",this.resetpassword.oldpassword),t.append("newPassword",this.resetpassword.newpassword),this.$axios.post("/user/editpassword",t).then((function(t){var a=e;a.loading=!1,200==t.data.code?(a.message=t.data.meg,a.snackbar=!0,a.relogin(),a.$store.commit("dialog","Useredit")):(a.snackbar=!0,a.message=t.data.meg+"，代码："+t.data.code)})).catch((function(t){e.loading=!1,e.snackbar=!0,e.message="注册失败，网络异常请稍后重试。代码："+t}))},relogin:function(){var e=this;this.$axios.get("/user/profile").then((function(t){var a=e;if(200==t.data.code){var o={birthday:t.data.data.birthday,email:t.data.data.email,logo:t.data.data.logo,password:t.data.data.password,phone:t.data.data.phone,regtime:t.data.data.regtime,uid:t.data.data.uid,uname:t.data.data.uname,type:t.data.data.type};a.$store.commit("updateUser",o),a.$store.commit("islogin"),1==o.type&&a.addAdminRouter()}})).catch((function(e){console.log(e)}))}}},B=E,q=Object(d["a"])(B,G,P,!1,null,null,null),F=q.exports;m()(q,{VBtn:v["a"],VCard:p["a"],VCardActions:h["a"],VCardText:h["b"],VDatePicker:M["a"],VDialog:f["a"],VForm:b["a"],VIcon:k["a"],VRow:y["a"],VSnackbar:w["a"],VSpacer:_["a"],VTextField:x["a"],VToolbar:$["a"],VToolbarTitle:V["a"],VWindow:C["a"],VWindowItem:T["a"]});var U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{fullscreen:this.$store.state.sys.isMobile,"hide-overlay":"",persistent:"",transition:"dialog-bottom-transition",width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:this.$store.state.sys.color}},[a("v-toolbar-title",[e._v("关于")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},on:{click:e.isClose}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",{attrs:{align:"center"}},[e._v(" 湖南科技职业学院软件学院"),a("br"),e._v(" 天霸动霸tua 队"),a("br"),e._v(" 荣誉制作 ")])],1)],1)],1)},z=[],N={name:"About",props:["dialog"],methods:{isClose:function(){this.$store.commit("dialog","About")}}},W=N,H=Object(d["a"])(W,U,z,!1,null,null,null),Z=H.exports;m()(H,{VBtn:v["a"],VCard:p["a"],VCardText:h["b"],VDialog:f["a"],VIcon:k["a"],VRow:y["a"],VSpacer:_["a"],VToolbar:$["a"],VToolbarTitle:V["a"]});var J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{fullscreen:this.$store.state.sys.isMobile,scrollable:"","hide-overlay":"",persistent:"",transition:"dialog-bottom-transition",width:"800"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:this.$store.state.sys.color}},[a("v-btn",{directives:[{name:"show",rawName:"v-show",value:2==e.step,expression:"step==2"}],attrs:{icon:""},on:{click:function(t){e.step--}}},[a("v-icon",[e._v("mdi-arrow-left-thin-circle-outline")])],1),a("v-toolbar-title",[e._v(e._s(e.currentTitle))]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},on:{click:e.isClose}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[a("v-window",{model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[a("v-window-item",{attrs:{value:1}},[a("v-col",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],attrs:{cols:e.$store.state.sys.isMobile?6:4}},[a("v-sheet",{staticClass:"pa-3",attrs:{color:"lighten-4"}},[a("v-skeleton-loader",{staticClass:"mx-auto",attrs:{"max-width":"300",type:"card"}})],1)],1),a("ViewGood",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],attrs:{good:e.good,seckill:e.seckill}})],1),a("v-window-item",{attrs:{value:2}},[a("CreateOrder",{attrs:{good:e.good}})],1)],1)],1),a("v-window",{model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[a("v-window-item",{attrs:{value:1}},[a("v-card-actions",[a("v-spacer"),a("v-btn",{staticStyle:{right:"25px"},attrs:{dark:"",color:e.$store.state.sys.color,large:""},on:{click:function(t){-1!=e.$store.state.user.uid?e.time.remainTime<=0&&e.step++:e.$store.commit("dialog","Login")}}},[e.time.remainTime>0?a("span",[e._v("倒计时："+e._s(e.time.hour)+"时"+e._s(e.time.minute)+"分"+e._s(e.time.second)+"秒")]):e._e(),e.time.remainTime<=0?a("span",[e._v("立即购买")]):e._e()])],1)],1),a("v-window-item",{attrs:{value:2}},[a("v-card-actions",[a("v-spacer"),a("v-btn",{staticStyle:{right:"25px"},attrs:{dark:"",loading:e.loading,color:e.$store.state.sys.color,large:""},on:{click:function(t){return e.buy(e.good.gid)}}},[a("v-card-title",[e._v("￥"+e._s(e.good.price))]),a("span",[e._v("提交订单")])],1)],1)],1)],1)],1),a("v-overlay",{attrs:{absolute:"",value:e.overlay}},[e._v(" 正在排队中，请勿关闭本页面。 ")])],1),a("v-snackbar",{model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.message)+" ")])],1)},K=[],Q=(a("d81d"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-card",{attrs:{"max-height":"350","max-width":"350"}},[a("v-img",{staticClass:"white--text align-end",attrs:{"max-height":"350","max-width":"350",src:e.good.pic}})],1)],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[null!=e.seckill?a("v-card",{attrs:{color:"error"}},[a("v-card-text",[a("v-card-actions",[a("span",{staticClass:"text-h5"},[e._v("秒杀详情:")]),a("v-spacer"),a("v-btn",{attrs:{text:"",outlined:"",color:"grey darken-3"},on:{click:function(t){e.dialog=!0}}},[e._v("秒杀订单公示")])],1),a("br"),e._v(" 时间："+e._s(e.seckill.startday+" "+e.seckill.starttime+"到"+e.seckill.endday+" "+e.seckill.endtime)),a("br"),e._v(" 规则： "),e._l(e.seckill.data,(function(t,o){return a("span",{key:o},[e._v(" "+e._s("前"+t.top+"至"+t.end+"名：享受"+10*t.discount+"折")),a("br")])}))],2)],1):e._e(),a("v-card",{staticStyle:{top:"10px"}},[a("template",{slot:"progress"},[a("v-progress-linear",{attrs:{color:"deep-purple",height:"10",indeterminate:""}})],1),a("v-card-title",[e._v(e._s(e.good.gname))]),a("v-card-text",[a("v-row",{staticClass:"mx-0",attrs:{align:"center"}},[a("v-rating",{attrs:{value:5,color:"amber",dense:"","half-increments":"",readonly:"",size:"14"}}),a("div",{staticClass:"grey--text ml-4"},[e._v("5")])],1),a("v-card-title",[e._v("￥"+e._s(e.good.price))])],1),a("v-divider",{staticClass:"mx-4"}),a("v-card-title",[e._v(e._s(e.good.details))])],2)],1)],1),a("SeckillOrderList",{attrs:{dialog:e.dialog,sid:null!=e.seckill?e.seckill.sid:null},on:{dialogClose:e.dialogClose}})],1)}),X=[],Y=a("7ba3"),ee={name:"ViewGood",components:{SeckillOrderList:Y["a"]},props:["good","seckill"],data:function(){return{dialog:!1}},methods:{dialogClose:function(){this.dialog=!1}}},te=ee,ae=a("62ad"),oe=a("a523"),se=a("ce7e"),re=a("adda"),ne=a("8e36"),ie=a("1d4d"),le=Object(d["a"])(te,Q,X,!1,null,null,null),ce=le.exports;m()(le,{VBtn:v["a"],VCard:p["a"],VCardActions:h["a"],VCardText:h["b"],VCardTitle:h["c"],VCol:ae["a"],VContainer:oe["a"],VDivider:se["a"],VImg:re["a"],VProgressLinear:ne["a"],VRating:ie["a"],VRow:y["a"],VSpacer:_["a"]});var de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-card",[a("v-card-title",[e._v("用户信息: "),a("v-spacer"),a("v-btn",{attrs:{outlined:"",rounded:"",text:""},on:{click:function(t){return e.$store.commit("dialog","Useredit")}}},[e._v("修改资料 ")])],1),a("v-card-text",[e._v(" 用户名："+e._s(e.$store.state.user.uname)),a("br"),e._v(" 手机号："+e._s(e.$store.state.user.phone)),a("br"),e._v(" 邮箱："+e._s(e.$store.state.user.email)),a("br")])],1)],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-card",[a("template",{slot:"progress"},[a("v-progress-linear",{attrs:{color:"deep-purple",height:"10",indeterminate:""}})],1),a("v-card",{attrs:{"max-height":"350","max-width":"350"}},[a("v-img",{staticClass:"white--text align-end",attrs:{"max-height":"350","max-width":"350",src:e.good.pic}})],1),a("v-card-title",[e._v(e._s(e.good.gname))]),a("v-divider",{staticClass:"mx-4"}),a("v-card-title",[e._v(e._s(e.good.details))])],2)],1)],1),a("v-snackbar",{model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.message)+" ")])],1)},ue=[],me={name:"CreateOrder",props:["good"],data:function(){return{loading:!1,message:"",snackbar:!1}},methods:{}},ve=me,pe=Object(d["a"])(ve,de,ue,!1,null,null,null),he=pe.exports;m()(pe,{VBtn:v["a"],VCard:p["a"],VCardText:h["b"],VCardTitle:h["c"],VCol:ae["a"],VContainer:oe["a"],VDivider:se["a"],VImg:re["a"],VProgressLinear:ne["a"],VRow:y["a"],VSnackbar:w["a"],VSpacer:_["a"]});var ge={name:"ViewG",components:{ViewGood:ce,CreateOrder:he},props:["dialog"],data:function(){return{step:1,message:"",snackbar:!1,overlay:!1,good:{},seckill:null,loading:!0,orderState:0,time:{remainTime:0,hour:0,minute:0,second:0}}},mounted:function(){},watch:{"$store.state.sys.viewgood_id":function(e){this.step=1,this.loading=!0,this.time.remainTime=0,this.getGood(e),this.getSeckill(e),null!=this.seckill&&this.updateTime()}},computed:{currentTitle:function(){switch(this.step){case 1:return"商品详情";case 2:return"创建订单";default:return"BUG..."}}},methods:{isClose:function(){this.$store.commit("dialog","Viewgood")},getGood:function(e){var t=this;this.$axios.get("/goods/"+e).then((function(e){var a=t;if(200==e.data.code){a.loading=!1;var o=e.data.data;a.good=o}})).catch((function(e){console.log(e)}))},getSeckill:function(e){this.seckill=this.$store.state.seckill.map.get(e)},updateTime:function(){var e=this.seckill.startday+" "+this.seckill.starttime,t=new Date(e).getTime()-(new Date).getTime();this.time.remainTime=t/1e3,this.time.hour=Math.floor(this.time.remainTime/3600),this.time.minute=Math.floor(this.time.remainTime/60%60),this.time.second=Math.floor(this.time.remainTime%60%60),this.countDowm()},countDowm:function(){var e=this.time;clearInterval(this.promiseTimer),this.promiseTimer=setInterval((function(){0===e.hour?0!==e.minute&&0===e.second?(e.second=59,e.minute-=1):0===e.minute&&0===e.second?(e.second=0,clearInterval(e.promiseTimer)):e.second-=1:0!==e.minute&&0===e.second?(e.second=59,e.minute-=1):0===e.minute&&0===e.second?(e.hour-=1,e.minute=59,e.second=59):e.second-=1}),1e3)},formatNum:function(e){return e<10?"0"+e:""+e},buy:function(e){var t=this;if(null!=this.seckill){var a=this.seckill.endday+" "+this.seckill.endtime,o=new Date(a)<new Date;if(o&&!confirm("秒杀已结束，继续购买将按照原价购买。是否继续购买？"))return}this.overlay=!0,this.orderState=0,this.$axios.get("/goods/"+e+"/buy").then((function(e){var a=t;if(a.loading=!1,200==e.data.code){a.message=e.data.meg,a.snackbar=!0;var o=window.setInterval((function(){switch(a.getUuidState(a.$store.state.user.uid,a.good.gid,e.data.data),a.orderState){case 0:a.message="正在排队中，请勿刷新本页面",a.snackbar=!0;break;case 1:a.message="购买成功！请至我的-订单页面查看订单并付款",a.snackbar=!0,clearInterval(o),a.$store.commit("dialog","Viewgood"),a.overlay=!1;break;case 2:a.message="购买失败！库存不足，下次再试试吧~",a.snackbar=!0,clearInterval(o),a.overlay=!1;break;default:a.message="购买失败！服务器错误，下次再试试吧~",a.snackbar=!0,clearInterval(o),a.overlay=!1}}),3500)}else t.overlay=!1,t.loading=!1,a.message="错误，"+e.data.meg+"，代码："+e.data.code,a.snackbar=!0})).catch((function(e){t.loading=!1,t.snackbar=!0,t.message="购买失败，网络异常请稍后重试。代码："+e}))},getUuidState:function(e,t,a){var o=this;this.$axios.get("/order/"+e+t+a+"/getState").then((function(e){200==e.data.code&&(o.orderState=e.data.data)})).catch((function(e){console.log(e)}))}}},fe=ge,be=a("a797"),ke=a("8dd9"),ye=a("3129"),we=Object(d["a"])(fe,J,K,!1,null,null,null),_e=we.exports;m()(we,{VBtn:v["a"],VCard:p["a"],VCardActions:h["a"],VCardText:h["b"],VCardTitle:h["c"],VCol:ae["a"],VDialog:f["a"],VIcon:k["a"],VOverlay:be["a"],VRow:y["a"],VSheet:ke["a"],VSkeletonLoader:ye["a"],VSnackbar:w["a"],VSpacer:_["a"],VToolbar:$["a"],VToolbarTitle:V["a"],VWindow:C["a"],VWindowItem:T["a"]});var xe={name:"App",components:{Login:R,Register:j,About:Z,ViewG:_e,Edit:F},mounted:function(){this.$store.commit("isMobile",this.isMobile()),this.getCategory(),this.getSeckillByAll(),this.islogin()},computed:{color:function(){switch(this.$store.state.sys.navs.value){case 0:return"blue lighten-1";case 1:return"deep-purple lighten-1";case 2:return"deep-orange lighten-1";case 3:return"indigo";default:return"blue lighten-1"}}},watch:{color:function(e){this.$store.commit("setColor",e)}},data:function(){return{}},methods:{setCookie:function(e,t,a){a=a||0;var o="";if(0!=a){var s=new Date;s.setTime(s.getTime()+1e3*a),o="; expires="+s.toGMTString()}document.cookie=e+"="+escape(t)+o+";"},getCookie:function(e){for(var t=e+"=",a=decodeURIComponent(document.cookie),o=a.split(";"),s=0;s<o.length;s++){var r=o[s];while(" "==r.charAt(0))r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""},isMobile:function(){return document.body.clientWidth<document.body.clientHeight},menuSwitch:function(){var e=this;e.$store.state.sys.menubutton=!e.$store.state.sys.menubutton,setTimeout((function(){e.$store.state.sys.menubutton=!e.$store.state.sys.menubutton}),6e3)},dialog:function(e){"Logout"==e&&this.$axios.get("/user/logout").then((function(e){200==e.data.code&&(alert("退出成功"),top.location.reload())})).catch((function(e){console.log(e)})),"Admin"==e&&window.open("/admin"),this.$store.commit("dialog",e)},islogin:function(){var e=this;this.$axios.get("/user/profile").then((function(t){var a=e;if(200==t.data.code){var o={birthday:t.data.data.birthday,email:t.data.data.email,logo:t.data.data.logo,password:t.data.data.password,phone:t.data.data.phone,regtime:t.data.data.regtime,uid:t.data.data.uid,uname:t.data.data.uname,type:t.data.data.type};a.$store.commit("updateUser",o),a.$store.commit("islogin"),1==o.type&&a.addAdminRouter()}})).catch((function(e){console.log(e)}))},getCategory:function(){var e=this;this.$axios.get("/goods/category").then((function(t){var a=e;if(200==t.data.code){var o=t.data.data;a.$store.commit("updateCategory",o)}})).catch((function(e){console.log(e)}))},getSeckillByAll:function(){var e=this;this.$axios.get("/seckill").then((function(t){var a=e;if(200==t.data.code){a.loading=!1;for(var o=0;o<t.data.data.length;o++)t.data.data[o].data=JSON.parse(t.data.data[o].data);var s=t.data.data;a.$store.commit("updateSeckillList",s),a.$store.commit("updateSeckillMap",a.seckillToMap(s))}})).catch((function(e){console.log(e)}))},addAdminRouter:function(){this.$router.addRoute({path:"/admin/dashboard",name:"Dashboard",component:function(){return a.e("chunk-2d0ae5d6").then(a.bind(null,"0a6e"))}}),this.$router.addRoute({path:"/admin/order",name:"Order",component:function(){return Promise.all([a.e("chunk-50d76e67"),a.e("chunk-2d228876")]).then(a.bind(null,"da25"))}}),this.$router.addRoute({path:"/admin/activity",name:"Activity",component:function(){return Promise.all([a.e("chunk-50d76e67"),a.e("chunk-1cd42ab1")]).then(a.bind(null,"20f3"))}}),this.$router.addRoute({path:"/admin/user",name:"User",component:function(){return Promise.all([a.e("chunk-50d76e67"),a.e("chunk-0529d11c")]).then(a.bind(null,"de51"))}}),this.$router.addRoute({path:"/admin/goods",name:"Goods",component:function(){return Promise.all([a.e("chunk-50d76e67"),a.e("chunk-051d2f6c")]).then(a.bind(null,"f50f"))}})},seckillToMap:function(e){for(var t=new Map,a=0,o=Object.keys(e);a<o.length;a++){var s=o[a];t.set(e[s].gid,e[s])}return t}}},$e=xe,Ve=a("7496"),Ce=a("40dc"),Te=a("5bc1"),Se=a("8212"),Re=a("b81c"),Oe=a("553a"),Ae=a("8860"),Le=a("da13"),Ie=a("8270"),Me=a("5d23"),De=a("1baa"),je=a("34c3"),Ge=a("f6c4"),Pe=a("e449"),Ee=a("f774"),Be=a("71a3"),qe=a("fe57"),Fe=a("9a96"),Ue=Object(d["a"])($e,s,r,!1,null,null,null),ze=Ue.exports;m()(Ue,{VApp:Ve["a"],VAppBar:Ce["a"],VAppBarNavIcon:Te["a"],VAvatar:Se["a"],VBottomNavigation:Re["a"],VBtn:v["a"],VContainer:oe["a"],VDivider:se["a"],VFooter:Oe["a"],VIcon:k["a"],VImg:re["a"],VList:Ae["a"],VListItem:Le["a"],VListItemAvatar:Ie["a"],VListItemContent:Me["a"],VListItemGroup:De["a"],VListItemIcon:je["a"],VListItemSubtitle:Me["b"],VListItemTitle:Me["c"],VMain:Ge["a"],VMenu:Pe["a"],VNavigationDrawer:Ee["a"],VSpacer:_["a"],VTab:Be["a"],VTabs:qe["a"],VTabsSlider:Fe["a"],VToolbarTitle:V["a"]});var Ne=a("8c4f"),We=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",[a("HotGoods"),a("div",{staticStyle:{height:"30px"}}),a("GoodsList",{attrs:{category:0}})],1)],1)},He=[],Ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",[a("v-sheet",{staticClass:"mx-auto",attrs:{elevation:"6",rounded:"","max-width":"100%"}},[a("h2",{staticStyle:{"text-align":"center"}},[e._v("热销商品")]),a("v-slide-group",{staticClass:"pa-4",attrs:{"show-arrows":""},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},e._l(e.goods,(function(t){return a("v-slide-item",{key:t.gid},[a("v-card",{staticClass:"ma-2",attrs:{hover:"",height:"150",width:"150"},on:{click:function(a){return e.viewgood(t.gid)}}},[a("v-img",{staticClass:"white--text align-end",attrs:{src:t.pic,gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)",height:"150"}},[a("v-card-title",{domProps:{textContent:e._s(t.gname.slice(0,8)+"…")}})],1)],1)],1)})),1)],1)],1)},Je=[],Ke={name:"HotGoods",data:function(){return{model:null,goods:[{gid:1,gname:"加载中...",price:1,category:1,total:1,state:0,stock:1,remarks:"12",details:"",pic:""}]}},mounted:function(){this.getGoodsRandom(8)},methods:{viewgood:function(e){this.$store.state.sys.viewgood_id=e,this.$store.commit("dialog","Viewgood")},getGoodsRandom:function(e){var t=this;this.$axios.get("/goods/random?n="+e).then((function(e){var a=t;if(200==e.data.code){var o=e.data.data;a.goods=o}})).catch((function(e){console.log(e)}))}}},Qe=Ke,Xe=a("7efd"),Ye=a("9dbe"),et=Object(d["a"])(Qe,Ze,Je,!1,null,null,null),tt=et.exports;m()(et,{VCard:p["a"],VCardTitle:h["c"],VImg:re["a"],VRow:y["a"],VSheet:ke["a"],VSlideGroup:Xe["b"],VSlideItem:Ye["a"]});var at=a("8588"),ot={components:{HotGoods:tt,GoodsList:at["a"]},data:function(){return{}}},st=ot,rt=Object(d["a"])(st,We,He,!1,null,null,null),nt=rt.exports;m()(rt,{VContainer:oe["a"]}),o["a"].use(Ne["a"]);var it=[{path:"/",alias:"/index",name:"Index",component:nt},{path:"/all",name:"All",component:function(){return Promise.all([a.e("chunk-50d76e67"),a.e("about")]).then(a.bind(null,"cf5b"))}},{path:"/my",name:"My",component:function(){return Promise.all([a.e("chunk-50d76e67"),a.e("about")]).then(a.bind(null,"4c41"))}},{path:"/myorder",name:"MyOrder",component:function(){return Promise.all([a.e("chunk-50d76e67"),a.e("about")]).then(a.bind(null,"cf2a"))}}],lt=new Ne["a"]({mode:"hash",base:"",routes:it}),ct=lt,dt=(a("159b"),a("a434"),a("2f62"));o["a"].use(dt["a"]);var ut=new dt["a"].Store({state:{sys:{color:"blue lighten-1",isMobile:!1,name:"商城",logo:"",menubutton:!0,barmenu:[{name:"登录",url:"Login"},{name:"注册",url:"Register"},{name:"关于",url:"About"}],bottom_nav:{value:0},navs:{value:0,navs:[{name:"商城",icon:"mdi-shopping",url:"/index"},{name:"商品分类",icon:"mdi-all-inclusive",url:"/all"},{name:"我的",icon:"mdi-account-circle",url:"/my"}],navs_admin:[{name:"仪表盘",icon:"mdi-view-dashboard",url:{path:"/admin/dashboard"}},{name:"订单管理",icon:"mdi-currency-usd ",url:{path:"/admin/order"}},{name:"商品管理",icon:"mdi-dolly",url:{path:"/admin/goods"}},{name:"营销活动",icon:"mdi-chart-areaspline",url:{path:"/admin/activity"}},{name:"用户管理",icon:"mdi-book-account",url:{path:"/admin/user"}}]},dialog:{login:!1,register:!1,about:!1,useredit:!1,viewgood:!1},viewgood_id:0},user:{birthday:"未登录",email:"未登录",logo:"https://pan.imzdx.top/api/v3/file/get/30/nologin.jpeg?sign=XBVyfoSe9DmjEc5WrEkDvA4IIFbb5MtrQ1AKSOqrcWg%3D%3A0",password:"未登录",phone:"未登录",regtime:"未登录",uid:-1,uname:"未登录",type:0},goods:{tab:null,category:[{id:0,name:"全部"}]},seckill:{list:[],map:new Map}},mutations:{updateUser:function(e,t){e.user=t},updateCategory:function(e,t){t.forEach((function(t){e.goods.category.push({name:t.tyname,id:t.tyid})}))},updateSeckillList:function(e,t){e.seckill.list=t},updateSeckillMap:function(e,t){e.seckill.map=t},setColor:function(e,t){e.sys.color=t},isMobile:function(e,t){e.sys.isMobile=t},islogin:function(e){e.sys.barmenu.splice(0,2),e.sys.barmenu.push({name:"退出",url:"Logout"})},dialog:function(e,t){switch(t){case"Login":e.sys.dialog.login=!e.sys.dialog.login;break;case"Register":e.sys.dialog.register=!e.sys.dialog.register;break;case"About":e.sys.dialog.about=!e.sys.dialog.about;break;case"Useredit":e.sys.dialog.useredit=!e.sys.dialog.useredit;break;case"Viewgood":e.sys.dialog.viewgood=!e.sys.dialog.viewgood;break;default:break}}},actions:{},modules:{}}),mt=a("f309"),vt=a("5025"),pt=a.n(vt);o["a"].use(mt["a"]);var ht=new mt["a"]({lang:{locales:{zhHans:pt.a},current:"zhHans"},theme:{themes:{light:{primary:"#1976D2",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}}),gt=a("bc3a");gt.defaults.baseURL="/api",o["a"].prototype.$axios=gt,o["a"].config.productionTip=!1,new o["a"]({router:ct,store:ut,vuetify:ht,render:function(e){return e(ze)}}).$mount("#app")},"7ba3":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{scrollable:"","hide-overlay":"",persistent:"",transition:"dialog-bottom-transition",width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:this.$store.state.sys.color}},[a("v-toolbar-title",[e._v("活动名单公示")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},on:{click:e.isClose}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[a("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",[e._v("名次")]),a("th",[e._v("用户名")]),a("th",[e._v("电话")]),a("th",[e._v("折扣")])])]),a("tbody",[0==e.SeckillOrderList.length?a("td",{staticClass:"text-center",attrs:{colspan:"3"}},[e._v("目前还没有参与秒杀的订单，快去做第一人吧~ ")]):e._e(),e._l(e.SeckillOrderList,(function(t,o){return a("tr",{key:o},[a("td",[e._v(e._s(o+1))]),a("td",[e._v(e._s(t.name))]),a("td",[e._v(e._s(t.phone))]),a("td",[e._v(e._s(t.discount))])])}))],2)]},proxy:!0}])})],1),a("p",{staticClass:"text-center"},[e._v("活动统计：共计"+e._s(e.SeckillOrderList.length)+"个订单。（最多显示前一千笔订单）")])],1)],1)},s=[],r={name:"SeckillOrderList",props:["dialog","sid"],data:function(){return{SeckillOrderList:[]}},watch:{sid:function(){this.getSeckillOrderList()}},mounted:function(){this.getSeckillOrderList()},methods:{getSeckillOrderList:function(){var e=this;if(null!=this.sid){var t=this.sid;this.$axios.get("/seckill/"+t+"/seckillOrderList").then((function(t){var a=e;200==t.data.code&&(a.SeckillOrderList=t.data.data)})).catch((function(e){console.log(e)}))}},isClose:function(){this.$emit("dialogClose","")}}},n=r,i=a("2877"),l=a("6544"),c=a.n(l),d=a("8336"),u=a("b0af"),m=a("99d9"),v=a("169a"),p=a("132d"),h=a("1f4f"),g=a("2fa4"),f=a("71d9"),b=a("2a7f"),k=Object(i["a"])(n,o,s,!1,null,"56a0d524",null);t["a"]=k.exports;c()(k,{VBtn:d["a"],VCard:u["a"],VCardText:m["b"],VDialog:v["a"],VIcon:p["a"],VSimpleTable:h["a"],VSpacer:g["a"],VToolbar:f["a"],VToolbarTitle:b["a"]})},8588:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{attrs:{dense:""}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading&&0==e.goods.length,expression:"!loading&&goods.length==0"}]},[e._v("当前分类商品为空！")]),e._l(6,(function(t){return a("v-col",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],key:t,attrs:{cols:e.$store.state.sys.isMobile?6:4}},[a("v-sheet",{staticClass:"pa-3",attrs:{color:"lighten-4"}},[a("v-skeleton-loader",{staticClass:"mx-auto",attrs:{"max-width":"300",type:"card"}})],1)],1)})),e._l(e.goods,(function(t){return a("v-col",{key:t.gid+"all",attrs:{cols:e.$store.state.sys.isMobile?6:4}},[a("v-card",[a("v-img",{staticClass:"white--text align-end",attrs:{src:t.pic,gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)",height:"200px"}},[a("v-card-title",{domProps:{textContent:e._s(t.gname)}})],1),a("v-card-actions",[a("v-btn",{attrs:{"x-small":"",fab:"",color:e.$store.state.sys.color,text:""}},[e._v(" ￥"+e._s(t.price))]),a("v-spacer"),a("v-btn",{attrs:{small:"",color:null==e.$store.state.seckill.map.get(t.gid)?"success":"error"},on:{click:function(a){return e.viewgood(t.gid)}}},[a("v-icon",[e._v("mdi-basket")]),e._v(" "+e._s(null==e.$store.state.seckill.map.get(t.gid)?"立即购买":"秒杀活动")+" ")],1)],1)],1)],1)}))],2)},s=[],r={name:"GoodsList",props:["category"],data:function(){return{loading:!0,goods:[]}},watch:{$route:{handler:function(){this.getGoodsByCategory(this.$route.query.category)},deep:!0}},mounted:function(){this.loading=!0,this.getGoodsByCategory(this.$route.query.category)},methods:{viewgood:function(e){this.$store.state.sys.viewgood_id=e,this.$store.commit("dialog","Viewgood")},getGoodsByAll:function(){var e=this;this.$axios.get("/goods").then((function(t){var a=e;if(200==t.data.code){a.loading=!1;var o=t.data.data;a.goods=o}})).catch((function(e){console.log(e)}))},getGoodsByCategory:function(e){var t=this;this.$axios.get("/goods?category="+e).then((function(e){var a=t;if(200==e.data.code){a.loading=!1;var o=e.data.data;a.goods=o}})).catch((function(e){console.log(e)}))}}},n=r,i=a("2877"),l=a("6544"),c=a.n(l),d=a("8336"),u=a("b0af"),m=a("99d9"),v=a("62ad"),p=a("132d"),h=a("adda"),g=a("0fd9"),f=a("8dd9"),b=a("3129"),k=a("2fa4"),y=Object(i["a"])(n,o,s,!1,null,null,null);t["a"]=y.exports;c()(y,{VBtn:d["a"],VCard:u["a"],VCardActions:m["a"],VCardTitle:m["c"],VCol:v["a"],VIcon:p["a"],VImg:h["a"],VRow:g["a"],VSheet:f["a"],VSkeletonLoader:b["a"],VSpacer:k["a"]})}});
//# sourceMappingURL=app.d8492735.js.map