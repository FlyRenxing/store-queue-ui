(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-051d2f6c"],{"9d01":function(t,e,a){},b73d:function(t,e,a){"use strict";var i=a("5530"),s=(a("0481"),a("ec29"),a("9d01"),a("fe09")),o=a("c37a"),n=a("c3f0"),d=a("0789"),c=a("490a"),l=a("80d2");e["a"]=s["a"].extend({name:"v-switch",directives:{Touch:n["a"]},props:{inset:Boolean,loading:{type:[Boolean,String],default:!1},flat:{type:Boolean,default:!1}},computed:{classes:function(){return Object(i["a"])(Object(i["a"])({},o["a"].options.computed.classes.call(this)),{},{"v-input--selection-controls v-input--switch":!0,"v-input--switch--flat":this.flat,"v-input--switch--inset":this.inset})},attrs:function(){return{"aria-checked":String(this.isActive),"aria-disabled":String(this.isDisabled),role:"switch"}},validationState:function(){return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0},switchData:function(){return this.setTextColor(this.loading?void 0:this.validationState,{class:this.themeClasses})}},methods:{genDefaultSlot:function(){return[this.genSwitch(),this.genLabel()]},genSwitch:function(){return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",Object(i["a"])(Object(i["a"])({},this.attrs),this.attrs$)),this.genRipple(this.setTextColor(this.validationState,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",Object(i["a"])({staticClass:"v-input--switch__track"},this.switchData)),this.$createElement("div",Object(i["a"])({staticClass:"v-input--switch__thumb"},this.switchData),[this.genProgress()])])},genProgress:function(){return this.$createElement(d["c"],{},[!1===this.loading?null:this.$slots.progress||this.$createElement(c["a"],{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft:function(){this.isActive&&this.onChange()},onSwipeRight:function(){this.isActive||this.onChange()},onKeydown:function(t){(t.keyCode===l["x"].left&&this.isActive||t.keyCode===l["x"].right&&!this.isActive)&&this.onChange()}}})},f50f:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("h1",[t._v("商品管理")]),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.goods,search:t.search,"sort-by":"gid","sort-desc":!0},scopedSlots:t._u([{key:"item.category",fn:function(e){var a=e.item;return[t._v(" "+t._s(t.categoryMap.get(a.category))+" ")]}},{key:"item.state",fn:function(e){var i=e.item;return[a("v-switch",{attrs:{"true-value":0,"false-value":1,readonly:""},on:{click:function(e){return t.editItem(i)}},model:{value:i.state,callback:function(e){t.$set(i,"state",e)},expression:"item.state"}})]}},{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("商品列表")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"搜索","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-dialog",{attrs:{scrollable:"","max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",s,!1),i),[t._v(" 添加商品 ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))]),a("v-spacer"),t._v(" 是否上架： "),a("v-switch",{attrs:{"true-value":0,"false-value":1},model:{value:t.editedItem.state,callback:function(e){t.$set(t.editedItem,"state",e)},expression:"editedItem.state"}})],1),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-text-field",{attrs:{label:"商品名称"},model:{value:t.editedItem.gname,callback:function(e){t.$set(t.editedItem,"gname",e)},expression:"editedItem.gname"}})],1),a("v-col",{attrs:{cols:"12",sm:"3"}},[a("v-text-field",{attrs:{label:"商品价格"},model:{value:t.editedItem.price,callback:function(e){t.$set(t.editedItem,"price",e)},expression:"editedItem.price"}})],1),a("v-col",{attrs:{cols:"12",sm:"3"}},[a("v-select",{attrs:{items:t.$store.state.goods.category,"item-text":"name","item-value":"id",label:"商品分类"},model:{value:t.editedItem.category,callback:function(e){t.$set(t.editedItem,"category",e)},expression:"editedItem.category"}})],1),a("v-col",{attrs:{cols:"12",sm:"3"}},[a("v-text-field",{attrs:{label:"商品总数"},model:{value:t.editedItem.total,callback:function(e){t.$set(t.editedItem,"total",e)},expression:"editedItem.total"}})],1),a("v-col",{attrs:{cols:"12",sm:"3"}},[a("v-text-field",{attrs:{label:"剩余库存"},model:{value:t.editedItem.stock,callback:function(e){t.$set(t.editedItem,"stock",e)},expression:"editedItem.stock"}})],1),a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-text-field",{attrs:{label:"商品图片(URL)"},model:{value:t.editedItem.pic,callback:function(e){t.$set(t.editedItem,"pic",e)},expression:"editedItem.pic"}})],1),a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-text-field",{attrs:{label:"商品描述"},model:{value:t.editedItem.details,callback:function(e){t.$set(t.editedItem,"details",e)},expression:"editedItem.details"}})],1),a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-text-field",{attrs:{label:"备注"},model:{value:t.editedItem.remarks,callback:function(e){t.$set(t.editedItem,"remarks",e)},expression:"editedItem.remarks"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" 取消")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v(" 确定")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("确定删除该商品？")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("取消 ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("确定删除 ")]),a("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var i=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(i)}}},[t._v(" mdi-pencil")]),a("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteItem(i)}}},[t._v(" mdi-delete")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:t.getGoodsByAll}},[t._v(" 当前无商品-点此刷新")])]},proxy:!0}],null,!0)}),a("v-snackbar",{model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.message)+" ")])],1)},s=[],o=(a("4ec9"),a("d3b7"),a("3ca3"),a("ddb0"),a("b64b"),a("b0c0"),{name:"Admin-Goods",components:{},data:function(){return{message:"",snackbar:!1,search:"",dialog:!1,dialogDelete:!1,headers:[{text:"商品ID",align:"start",sortable:!0,value:"gid"},{text:"商品名称",value:"gname"},{text:"商品价格",value:"price"},{text:"分类",value:"category"},{text:"商品总数",value:"total"},{text:"商品库存",value:"stock"},{text:"商品备注",value:"remarks"},{text:"是否上架",value:"state",sortable:!1},{text:"操作",value:"actions",sortable:!1}],goods:[],editedIndex:-1,editedItem:{gid:null,gname:"",price:0,category:0,total:0,stock:0,pic:0,remarks:"",state:0},defaultItem:{gid:null,gname:"",price:0,category:0,total:0,stock:0,pic:"",remarks:"",state:0},categoryMap:null}},computed:{formTitle:function(){return-1===this.editedIndex?"添加商品":"编辑商品(gid:"+this.editedItem.gid+")"}},watch:{dialog:function(t){t||this.close()},dialogDelete:function(t){t||this.closeDelete()}},created:function(){this.getGoodsByAll(),this.objToMap(this.$store.state.goods.category)},methods:{getGoodsByAll:function(){var t=this;this.$axios.get("/goods/all").then((function(e){var a=t;if(200==e.data.code){a.loading=!1;var i=e.data.data;a.goods=i}})).catch((function(t){console.log(t)}))},newGoods:function(){var t=this;this.loading=!0;var e=new FormData;e.append("gname",this.editedItem.gname),e.append("price",this.editedItem.price),e.append("category",this.editedItem.category),e.append("total",this.editedItem.total),e.append("stock",this.editedItem.stock),e.append("state",this.editedItem.state),e.append("pic",this.editedItem.pic),e.append("details",this.editedItem.details),e.append("remarks",this.editedItem.remarks),this.$axios.post("/goods/new",e).then((function(e){var a=t;a.loading=!1,200==e.data.code?(a.message=e.data.meg,a.snackbar=!0,a.getGoodsByAll(),a.close()):(a.snackbar=!0,a.message=e.data.meg+"，代码："+e.data.code)})).catch((function(e){t.loading=!1,t.snackbar=!0,t.message="新增失败，网络异常请稍后重试。代码："+e}))},editGoods:function(){var t=this;this.loading=!0;var e=new FormData;e.append("gid",this.editedItem.gid),e.append("gname",this.editedItem.gname),e.append("price",this.editedItem.price),e.append("category",this.editedItem.category),e.append("total",this.editedItem.total),e.append("stock",this.editedItem.stock),e.append("state",this.editedItem.state),e.append("pic",this.editedItem.pic),e.append("details",this.editedItem.details),e.append("remarks",this.editedItem.remarks),this.$axios.post("/goods/edit",e).then((function(e){var a=t;a.loading=!1,200==e.data.code?(a.message=e.data.meg,a.snackbar=!0,a.getGoodsByAll(),a.close()):(a.snackbar=!0,a.message=e.data.meg+"，代码："+e.data.code)})).catch((function(e){t.loading=!1,t.snackbar=!0,t.message="修改失败，网络异常请稍后重试。代码："+e}))},deleteGoods:function(t){var e=this;this.loading=!0,this.$axios.get("/goods/delete?gid="+t).then((function(t){var a=e;a.loading=!1,200==t.data.code?(a.message=t.data.meg,a.snackbar=!0,a.getGoodsByAll(),a.closeDelete()):(a.snackbar=!0,a.message=t.data.meg+"，代码："+t.data.code)})).catch((function(t){e.loading=!1,e.snackbar=!0,e.message="修改失败，网络异常请稍后重试。代码："+t}))},initialize:function(){this.goods=[]},editItem:function(t){this.editedIndex=this.goods.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem:function(t){this.editedIndex=this.goods.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},deleteItemConfirm:function(){this.deleteGoods(this.editedItem.gid)},close:function(){var t=this;this.dialog=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},closeDelete:function(){var t=this;this.dialogDelete=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},save:function(){-1==this.editedIndex?this.newGoods():this.editGoods()},objToMap:function(t){for(var e=new Map,a=0,i=Object.keys(t);a<i.length;a++){var s=i[a];e.set(t[s].id,t[s].name)}this.categoryMap=e},addCategoryName:function(){for(var t=0;t<this.goods.length;t++){var e=this.goods[t];e.categoryName=this.categoryMap.get(e.category)}}}}),n=o,d=a("2877"),c=a("6544"),l=a.n(c),r=a("8336"),m=a("b0af"),h=a("99d9"),u=a("62ad"),v=a("a523"),g=a("8fea"),p=a("169a"),f=a("ce7e"),b=a("132d"),k=a("0fd9"),I=a("b974"),x=a("2db4"),y=a("2fa4"),w=a("b73d"),_=a("8654"),C=a("71d9"),$=a("2a7f"),D=Object(d["a"])(n,i,s,!1,null,null,null);e["default"]=D.exports;l()(D,{VBtn:r["a"],VCard:m["a"],VCardActions:h["a"],VCardText:h["b"],VCardTitle:h["c"],VCol:u["a"],VContainer:v["a"],VDataTable:g["a"],VDialog:p["a"],VDivider:f["a"],VIcon:b["a"],VRow:k["a"],VSelect:I["a"],VSnackbar:x["a"],VSpacer:y["a"],VSwitch:w["a"],VTextField:_["a"],VToolbar:C["a"],VToolbarTitle:$["a"]})}}]);
//# sourceMappingURL=chunk-051d2f6c.504654a9.js.map